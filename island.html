<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Creator {{ name_creator }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/creative.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/testing.css') }}">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0e1b2b;
            color: #fff;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        header {
            background: transparent;
            padding: 10px 20px;
            text-align: left;
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
        }
        
        .back-button {
            color: white;
            text-decoration: none;
            font-weight: bold;
            padding: 10px 15px;
            border-radius: 4px;
            background-color: #1e416e;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            width: auto;
            font-size: 14px;
        }
        
        .back-button .esc-key {
            background-color: #171717;
            color: white;
            font-size: 10px;
            font-weight: bold;
            padding: 3px 6px;
            border-radius: 3px;
            margin-right: 10px;
            text-transform: uppercase;
        }
        
        .back-button:hover {
            background-color: #2a5897;
        }
        
        .back-button:active {
            background-color: #153251;
        }
        
        .creator-container {
            padding: 30px 40px;
        }
        
        .creator-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .epic-logo-img {
            width: 100%;
            height: auto;
            object-fit: contain;
            filter: brightness(0) invert(1);
        }
        
        .creator-logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            background-color: #000;
            border-radius: 50%;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }
        
        .creator-logo-img {
            width: 100%;
            height: auto;
            object-fit: contain;
            filter: brightness(0) invert(1);
        }
        
        .creator-info {
            display: flex;
            flex-direction: column;
            margin-right: 3%;
            margin-bottom: 3%;
            margin-left: 3%;
            margin-top: 3%;
        }
        
        .creator-title {
            font-size: 32px;
            font-weight: bold;
            text-transform: uppercase;
            margin: 0;
            letter-spacing: 1px;
        }
        
        .favorite-counter {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        
        .favorite-icon svg {
            width: 20px;
            height: 20px;
            fill: #ff3b7f;
            margin-right: 8px;
        }
        
        .favorite-text {
            color: rgba(255,255,255,0.8);
            font-size: 16px;
        }
        
        .favorite-button {
            background-color: #ffea00;
            color: #000;
            border: none;
            border-radius: 25px;
            padding: 10px 25px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            margin: 20px 0;
            display: inline-flex;
            align-items: center;
            transition: transform 0.2s;
            text-decoration: none;
        }
        
        .favorite-button:hover {
            transform: scale(1.05);
        }
        
        .favorite-button svg {
            margin-right: 10px;
            width: 18px;
            height: 18px;
        }
        
        .content-area {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin: 40px 0 20px;
        }
        
        .section-info {
            display: flex;
            flex-direction: column;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
        }
        
        .section-subtitle {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
        }
        
        .island-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .more-islands .island-grid {
            grid-template-columns: repeat(5, 1fr);
        }
        
        .island {
            background: #111920;
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            flex: 0 0 300px;
            max-width: 300px;
            min-width: 300px;
            height: 200px;
        }
        
        .island:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        }
        
        .island-link {
            color: white;
            text-decoration: none;
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .island-img {
            position: relative;
            overflow: hidden;
            width: 100%;
            height: 100%;
            background: #0d1419;
            border-radius: 12px;
        }
        
        .island-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        
        .island:hover .island-image {
            transform: scale(1.05);
        }

        .epic-badge {
            position: absolute;
            top: 6px;
            left: 6px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 4px;
            padding: 3px 6px;
            z-index: 2;
        }
        
        .epic-badge img {
            height: 14px;
            width: auto;
        }
        
        .players {
            position: absolute;
            bottom: 6px;
            left: 10px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            z-index: 2;
        }
        
        .players svg {
            width: 12px;
            height: 12px;
            margin-right: 4px;
            fill: white;
        }
        
        .island-title {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 25px 10px 6px;
            font-size: 16px;
            font-weight: bold;
            text-align: left;
            text-transform: uppercase;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            display: flex;
            align-items: flex-end;
            letter-spacing: 0.5px;
            z-index: 1;
        }
        
        .like-button {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s;
            z-index: 2;
        }
        
        .like-button svg {
            width: 16px;
            height: 16px;
            fill: white;
        }
        
        .like-button:hover {
            background: rgba(255, 51, 102, 0.7);
        }
        
        .liked svg {
            fill: #ff3366;
        }

        .creator-logomax {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-left: 0px;
        }
        
        @media (max-width: 1200px) {
            .more-islands .island-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .island {
                flex: 0 0 280px;
                max-width: 280px;
                height: 200px;
            }
        }
        
        @media (max-width: 900px) {
            .island-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .more-islands .island-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .creator-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .epic-logo {
                margin-bottom: 15px;
                width: 60px;
                height: 60px;
                margin-bottom: 40px;
            }
            
            .island {
                flex: 0 0 260px;
                max-width: 260px;
                height: 200px;;
            }
        }
        
        @media (max-width: 600px) {
            .island-grid {
                grid-template-columns: 1fr;
            }
            
            .more-islands .island-grid {
                grid-template-columns: 1fr;
            }
            
            .island {
                flex: 0 0 240px;
                max-width: 240px;
                height: 200px;
            }
            
            .island-title {
                font-size: 14px;
                padding: 20px 8px 5px;
            }
        }

        /* iPhone-specific styles */
        @media only screen 
        and (min-device-width: 320px) 
        and (max-device-width: 812px)
        and (-webkit-min-device-pixel-ratio: 2) {
            .creator-logomax {
                margin-left: 20px;
            }
        }

        /* iPhone SE, 5, 5S, 5C, iPod Touch 5g and later */
        @media only screen 
        and (min-device-width: 768px) 
        and (max-device-width: 901px) 
        and (-webkit-min-device-pixel-ratio: 2) {
            .creator-logomax {
                margin-left: 20px;
            }
        }

        @media only screen 
        and (min-device-width: 320px) 
        and (max-device-width: 568px)
        and (-webkit-min-device-pixel-ratio: 2) {
            .creator-logomax {
                margin-left: 20px;
            }
        }

        /* iPhone X, XS, 11 Pro, 12 mini */
        @media only screen 
        and (min-device-width: 375px) 
        and (max-device-width: 812px) 
        and (-webkit-min-device-pixel-ratio: 3)
        and (orientation: portrait) {
            .creator-logomax {
                margin-left: 20px;
            }

            .back-button {
                top: 40px; /* Adjust back button for notch */
            }
        }

        /* iPhone 12/13/14 Pro Max */
        @supports (padding: max(0px)) {
            .back-button {
                right: max(20px, env(safe-area-inset-right));
                top: max(20px, env(safe-area-inset-top));
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="/" class="back-button">
            <span class="esc-key">ESC</span>
            BACK
        </a>
    </header>
    
    <img src="{{ creatorbanner }}" loading="lazy" alt="" style="display:block;position:absolute;top:0;left:0;width:100%;height:336px;object-fit:cover;object-position:center top;-webkit-mask-image:linear-gradient(to top,transparent 2%,black 95%);mask-image:linear-gradient(to top,transparent 2%,black 95%);z-index:-1">
    <div class="creator-container">
        <div class="content-area">
            <div class="creator-header">
                <div class="epic-logo">
                    <img src="{{ creatorlogo }}" class="creator-logomax">
                </div>
                <div class="creator-info">
                    <h1 class="creator-title">{{ name_creator }}</h1>
                    <div class="favorite-counter">
                        <div class="favorite-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
                                <path fill-rule="evenodd" d="M4.404 7.404a6.5 6.5 0 0 1 9.192 0L16 9.808l2.404-2.404a6.5 6.5 0 0 1 9.192 9.192L16 28.192 4.404 16.596a6.5 6.5 0 0 1 0-9.192" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <div class="favorite-text">
                            <span class="favorite-count">{{ creatorfollow }}</span>
                            <span class="favorite-label"> Followers</span>
                        </div>
                    </div>

                    <div class="creator-socials">
                        {% if island.get("twitter") != 'None' %}
                            <a href="{{ island.twitter }}" target="_blank" rel="noopener noreferrer" class="button-grey">
                                <!-- Twitter SVG -->
                                <svg viewBox="0 0 32 32" style="width:20px;height:20px">
                                    <path d="m18.537 13.958 9.928-11.291h-2.353l-8.62 9.804-6.884-9.805H2.667l10.41 14.826-10.41 11.841H5.02l9.102-10.353 7.271 10.353h7.94L18.538 13.958Zm-3.222 3.665-1.055-1.476L5.867 4.399h3.614l6.773 9.48 1.055 1.477 8.804 12.323H22.5l-7.185-10.055z">
                                    </path>
                                </svg>
                            </a>
                        {% endif %}
                        {% if island.get("youtube") != 'None' %}
                            <a href="{{ island.youtube }}" target="_blank" rel="noopener noreferrer" class="button-grey">
                                <!-- YouTube SVG -->
                                <svg viewBox="0 0 24 24" style="width:20px;height:20px">
                                    <path d="M11.993 3.5s-7.501 0-9.384.495C1.6 4.28.77 5.12.489 6.155 0 8.062 0 12.009 0 12.009s0 3.96.49 5.836a3.07 3.07 0 0 0 2.119 2.146c1.897.51 9.383.51 9.383.51s7.516 0 9.399-.495a3 3 0 0 0 2.105-2.146C24 15.97 24 12.022 24 12.022s.015-3.96-.504-5.866a2.98 2.98 0 0 0-2.105-2.13C19.508 3.5 11.993 3.5 11.993 3.5M9.606 8.361l6.24 3.646-6.24 3.632z">
                                    </path>
                                </svg>
                            </a>
                        {% endif %}
                        {% if island.get("discord") != 'None' %}
                            <a href="{{ island.discord }}" target="_blank" rel="noopener noreferrer" class="button-grey">
                                <!-- Discord SVG -->
                                <svg viewBox="0 0 24 24" style="width:20px;height:20px">
                                    <path d="M20.317 4.656a19.8 19.8 0 0 0-4.885-1.516.074.074 0 0 0-.079.038c-.21.375-.444.864-.608 1.249a18.3 18.3 0 0 0-5.487 0 13 13 0 0 0-.617-1.25.08.08 0 0 0-.079-.037 19.7 19.7 0 0 0-4.885 1.516.1.1 0 0 0-.032.027C.533 9.332-.32 13.866.099 18.343a.08.08 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.08.08 0 0 0 .084-.029c.462-.63.874-1.295 1.226-1.994.021-.04.001-.09-.041-.105a13 13 0 0 1-1.872-.893.077.077 0 0 1-.008-.127q.19-.143.372-.292a.07.07 0 0 1 .078-.01c3.927 1.793 8.18 1.793 12.061 0a.07.07 0 0 1 .079.01q.18.148.372.292c.044.032.04.1-.006.127q-.895.523-1.873.892a.077.077 0 0 0-.041.106c.36.698.772 1.363 1.225 1.994a.08.08 0 0 0 .084.028 19.8 19.8 0 0 0 6.002-3.03.08.08 0 0 0 .032-.055c.5-5.176-.838-9.673-3.549-13.66a.06.06 0 0 0-.031-.028M8.02 15.617c-1.182 0-2.157-1.086-2.157-2.419S6.82 10.78 8.02 10.78c1.21 0 2.176 1.095 2.157 2.42 0 1.332-.956 2.418-2.157 2.418m7.975 0c-1.183 0-2.157-1.086-2.157-2.419s.955-2.419 2.157-2.419c1.21 0 2.176 1.095 2.157 2.42 0 1.332-.946 2.418-2.157 2.418">
                                    </path>
                                </svg>
                            </a>
                        {% endif %}
                        {% if island.get("instagram") != 'None' %}
                            <a href="{{ island.instagram }}" target="_blank" rel="noopener noreferrer" class="button-grey">
                                <!-- Instagram SVG -->
                                <svg viewBox="0 0 24 24" style="width:20px;height:20px">
                                    <path d="M16.48 2H7.52A5.526 5.526 0 0 0 2 7.52v8.96A5.525 5.525 0 0 0 7.52 22h8.96A5.526 5.526 0 0 0 22 16.48V7.52A5.526 5.526 0 0 0 16.48 2m3.746 14.48a3.75 3.75 0 0 1-3.745 3.746H7.519a3.75 3.75 0 0 1-3.744-3.745V7.519a3.75 3.75 0 0 1 3.744-3.744h8.962a3.75 3.75 0 0 1 3.744 3.744z"></path><path d="M12 6.847A5.16 5.16 0 0 0 6.846 12 5.16 5.16 0 0 0 12 17.154A5.16 5.16 0 0 0 17.154 12 5.16 5.16 0 0 0 12 6.847m0 8.532A3.383 3.383 0 0 1 8.621 12 3.383 3.383 0 0 1 12 8.621a3.383 3.383 0 0 1 3.379 3.38A3.383 3.383 0 0 1 12 15.378M17.37 5.342a1.306 1.306 0 0 0-1.302 1.301c0 .342.14.678.383.92.24.242.577.382.919.382s.678-.14.92-.381c.243-.243.381-.579.381-.92 0-.344-.138-.68-.38-.921a1.3 1.3 0 0 0-.921-.38">
                                    </path>
                                </svg>
                            </a>
                        {% endif %}
                        {% if island.get("tiktok") != 'None' %}
                            <a href="{{ island.tiktok }}" target="_blank" rel="noopener noreferrer" class="button-grey">
                                <!-- TikTok SVG -->
                                <svg viewBox="0 0 24 24" style="width:20px;height:20px">
                                    <path d="M12.5 0C13.8 0 15.1 0 16.4 0 16.5 1.5 17.1 3.1 18.2 4.2 19.3 5.3 20.9 5.9 22.4 6V10C20.9 10 19.4 9.6 18.1 9 17.5 8.7 17 8.4 16.4 8 16.4 10.9 16.4 13.8 16.4 16.7 16.3 18.1 15.8 19.5 15 20.6 13.7 22.5 11.4 23.7 9.1 23.8 7.6 23.9 6.2 23.5 5 22.7 3 21.5 1.6 19.3 1.4 17 1.3 16.5 1.3 16 1.4 15.5 1.5 13.6 2.5 11.8 3.9 10.5 5.6 9.1 7.9 8.4 10.1 8.8 10.1 10.3 10.1 11.8 10.1 13.3 9.1 13 7.9 13.1 7.1 13.7 6.4 14.1 6 14.7 5.7 15.4 5.5 15.9 5.6 16.5 5.7 17 5.9 18.7 7.5 20 9.2 19.9 10.6 19.9 11.7 19.2 12.8 18.5 13 18.3 13.2 18 13.2 17.3 13.3 15.5 13.3 13.7 13.3 12 13.3 8 13.3 4 13.3 0 12.5 0z">
                                    </path>
                                </svg>
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            {% if creator.get("featured") != 'None' %}
                <div class="section-header">
                    <div class="section-info">
                        <h2 class="section-title">Featured</h2>
                    <span class="section-subtitle">By This Creator</span>
                    </div>
                </div>
                <div class="island-grid" id="featuredGrid">
                    <!-- Featured islands will be populated here -->
                </div>
            {% endif %}

            {% if creator.get("picks") != 'None' %}
                <div class="section-header">
                    <div class="section-info">
                        <h2 class="section-title">Creator's Picks</h2>
                        <span class="section-subtitle">Hand-Selected & Made by Other Creators</span>
                    </div>
                </div>
                <div class="island-grid" id="picksGrid">
                    <!-- Picks islands will be populated here -->
                </div>
            {% endif %}
            
            <div class="section-header">
                <div class="section-info">
                    <h2 class="section-title">More Islands</h2>
                    <span class="section-subtitle">By This Creator</span>
                </div>
            </div>
            <div class="more-islands">
                <div class="island-grid" id="islandGrid">
                    <!-- More islands will be populated here -->
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Initialize creator object from template variables
        var creator = { featured: [], picks: [] };

        // Use a separate script block with type="application/json" to inject data from Jinja
        
        // Add ESC key listener for back functionality - using keyup to prevent multiple triggers when held
        let escPressed = false;
        
        document.addEventListener('keydown', function(event) {
            // Check if ESC key was pressed (key code 27) and not already pressed
            if ((event.key === "Escape" || event.keyCode === 27) && !escPressed) {
                escPressed = true;
            }
        });
        
        document.addEventListener('keyup', function(event) {
            // Only navigate when the ESC key is released
            if ((event.key === "Escape" || event.keyCode === 27) && escPressed) {
                // Navigate back to the same location as the back button
                window.location.href = document.querySelector('.back-button').getAttribute('href');
                escPressed = false;
            }
        });
    </script>
    
    <script type="application/json" id="creator-data">
        {
            "featured": {% if creator.get("featured") != 'None' and creator.get("featured") %}{{ creator.get("featured")|tojson|safe }}{% else %}[]{% endif %},
            "picks": {% if creator.get("picks") != 'None' and creator.get("picks") %}{{ creator.get("picks")|tojson|safe }}{% else %}[]{% endif %}
        }
    </script>
    
    <script>
        // Parse the JSON data from the template
        try {
            const creatorData = document.getElementById('creator-data').textContent;
            if (creatorData) {
                creator = JSON.parse(creatorData);
            }
        } catch (error) {
            console.error('Error parsing creator data:', error);
        }

        // Add the SVG definition function to be reused
        function createSvgDefs() {
            const svgDefs = document.createElement('div');
            svgDefs.style.display = 'none';
            svgDefs.innerHTML = `
                <svg viewBox='0 0 24 24'>
                    <path id='ccu-icon' d='M10.1 16c2.3-.5 4.4-1 3.4-2.9-3.1-6-.8-9.1 2.5-9.1 3.4 0 5.6 3.3 2.5 9.1-1 2 1.1 2.4 3.4 3 2 .4 2.1 1.4 2.1 3v.9H8c0-2.2-.2-3.4 2.1-4zM0 20h6c0-6.5 3-3.7 3-8.9C9 9.1 7.7 8 6 8c-2.5 0-4.2 2.4-1.9 6.8.8 1.5-.8 1.9-2.5 2.2C0 17.4 0 18.1 0 19.4v.6z'></path>
                </svg>
            `;
            return svgDefs;
        }

        // Function to create an island card element
        function createIslandCard(island) {
            const islandCard = document.createElement('div');
            islandCard.className = 'island';
            
            islandCard.innerHTML = `
                <a href="/island/${island.code}" class="island-link">
                    <div class="island-img">
                        <img src="${island.image}" alt="${island.name}" loading="lazy" class="island-image" onerror="this.src='https://cdn2.unrealengine.com/t-ui-creatorprofile-banner-fallbackerror-1920x1080-3f830cc95018.png'">
                        <div class="players">
                            <svg viewBox="0 0 24 24">
                                <use href="#ccu-icon"></use>
                            </svg>
                            ${island.ccu}
                        </div>
                    </div>
                    <div class="island-title">${island.name}</div>
                </a>
            `;
            return islandCard;
        }

        // Initialize Featured Grid if it exists
        const featuredGrid = document.getElementById('featuredGrid');
        if (featuredGrid) {
            featuredGrid.innerHTML = '';  // Clear existing content
            featuredGrid.appendChild(createSvgDefs());
            
            // Check if creator.featured exists and is iterable
            if (typeof creator !== 'undefined' && creator.featured && Array.isArray(creator.featured)) {
                creator.featured.forEach(island => {
                    featuredGrid.appendChild(createIslandCard(island));
                });
            }
        }

        // Initialize Picks Grid if it exists
        const picksGrid = document.getElementById('picksGrid');
        if (picksGrid) {
            picksGrid.innerHTML = '';  // Clear existing content
            picksGrid.appendChild(createSvgDefs());
            
            // Check if creator.picks exists and is iterable
            if (typeof creator !== 'undefined' && creator.picks && Array.isArray(creator.picks)) {
                creator.picks.forEach(island => {
                    picksGrid.appendChild(createIslandCard(island));
                });
            }
        }

        // Initialize regular Islands Grid
        const islandGrid = document.getElementById('islandGrid');
        if (islandGrid) {
            islandGrid.innerHTML = '';  // Clear existing content
            islandGrid.appendChild(createSvgDefs());
        }

        // Function to fetch CCU data
        function fetchCCUData() {
            if (window.location.pathname.startsWith('/creator/')) {
                const creator_id = "{{ creator_id }}"
                /*const creatorId = window.location.pathname.split('/')[2];  // Extract creator ID from URL*/
                fetch(`/api/live-ccu/${creator_id}`)
                    .then(response => response.json())
                    .then(islands => {
                        const islandGrid = document.getElementById('islandGrid');
                        islandGrid.innerHTML = '';  // Clear existing content
                        
                        // Add the SVG definition for the player icon
                        const svgDefs = document.createElement('div');
                        svgDefs.style.display = 'none';
                        svgDefs.innerHTML = `
                            <svg viewBox='0 0 24 24'>
                                <path id='ccu-icon' d='M10.1 16c2.3-.5 4.4-1 3.4-2.9-3.1-6-.8-9.1 2.5-9.1 3.4 0 5.6 3.3 2.5 9.1-1 2 1.1 2.4 3.4 3 2 .4 2.1 1.4 2.1 3v.9H8c0-2.2-.2-3.4 2.1-4zM0 20h6c0-6.5 3-3.7 3-8.9C9 9.1 7.7 8 6 8c-2.5 0-4.2 2.4-1.9 6.8.8 1.5-.8 1.9-2.5 2.2C0 17.4 0 18.1 0 19.4v.6z'></path>
                            </svg>
                        `;
                        islandGrid.appendChild(svgDefs);
                        
                        islands.forEach(island => {
                            // Create new HTML elements dynamically for each island
                            const islandCard = document.createElement('div');
                            islandCard.className = 'island';
                            
                            islandCard.innerHTML = `
                                <a href="/island/${island.code}" class="island-link">
                                    <div class="island-img">
                                        <img src="${island.image}" alt="${island.name}" loading="lazy" class="island-image" onerror="this.src='https://cdn2.unrealengine.com/default-island-1920x1080-382ade9e22cf.jpg'">
                                        <div class="players">
                                            <svg viewBox="0 0 24 24">
                                                <use href="#ccu-icon"></use>
                                            </svg>
                                            ${island.ccu}
                                        </div>
                                    </div>
                                    <div class="island-title">${island.name}</div>
                                </a>
                            `;
                            islandGrid.appendChild(islandCard);
                        });
                    })
                    .catch(error => {
                        console.error('Error fetching CCU data:', error);
                    });
            }
        }

        fetchCCUData();
        setInterval(fetchCCUData, 15000);  // 15000 ms = 15 seconds

        // Copy to clipboard function
        function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    console.log('Copied: ' + text);
                }).catch(err => {
                    console.error('Could not copy text: ', err);
                });
            } else {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand("copy");
                    console.log('Copied (fallback method): ' + text);
                } catch (err) {
                    console.error('Fallback copy failed: ', err);
                }
                document.body.removeChild(textArea);
            }
        }
    </script>
</body>
</html>
