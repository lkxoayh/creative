<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creator {{ name_creator }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/creative.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/testing.css') }}">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
            margin: 0;
            padding: 0;
        }
        header {
            background: transparent;
            padding: 10px 20px;
            text-align: left;
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
        }
        .creator-logo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-top: 10px;
            border: 3px solid #fff;
        }
        .island-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            padding: 20px;
        }
        .island-card img:active {
            transform: scale(0.95);
        }
        .ccu-display {
            font-size: 1.2em;
            color: #ffffffd3;
            margin-top: 10px;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease-in-out;
        }
        .copy-container {
            position: relative;
            display: flex;
            justify-content: center;
            width: 100%;
            margin: 5px auto 15px;
        }
        .copy-button {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #444;
            border: 1px solid #666;
            border-radius: 20px;
            padding: 5px 15px;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
            color: #fff;
        }
        .copy-button:hover {
            background: #555;
        }
        .copy-button:active {
            transform: scale(1.1);
        }
        .copy-icon {
            margin-left: 5px;
            font-size: 14px;
        }
        .tooltip {
            visibility: hidden;
            background: black;
            color: white;
            text-align: center;
            border-radius: 5px;
            padding: 5px;
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.2s;
        }
        .copy-container:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes zoomIn {
            from { transform: scale(0.8); }
            to { transform: scale(1); }
        }
        .back-button {
            color: white;
            text-decoration: none;
            font-weight: bold;
            padding: 8px 15px;
            border-radius: 5px;
            background-color: rgba(0, 0, 0, 0.5);
            transition: background-color 0.3s;
        }
        .back-button:hover {
            background-color: rgba(0, 0, 0, 0.7);
        }
        .creator-profile {
            display: inline-flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: rgba(0,0,0,.3);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border-radius: 8px
        }
        .creator-socials {
            display: flex;
            gap: 8px
        }
        .creator-socials .button-grey {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 36px;
            height: 36px;
            padding: 0;
            margin-top: 0;
        }
        element.style {
            background: transparent;
        }
        .island .players {
            position: absolute;
            bottom: 8px;
            left: 8px;
            padding: 5px 10px 3px 10px;
            background: rgba(13,13,13,.9);
            color: #fff;
            text-shadow: 0 5px 3px rgba(0,0,0,.2);
            border-radius: 25px;
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        
        .island .players svg {
            width: 14px;
            height: 14px;
            fill: rgba(255,255,255,.7);
            margin-right: 5px;
        }
        
        .island-title {
            padding: 16px 10px 13px;
            font-size: 16px;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            line-height: 1
        }
        
        @media(max-width: 770px) {
            .island-title,.island .players {
                font-size:14px
            }
        
            .island-title {
                padding: 14px 10px 11px
            }
        }
        
        .list-view .island-title {
            padding: 0;
            white-space: normal
        }
        
        .island:hover img {
            filter: brightness(1.35);
            transform: scale(1.08);
        }
        
        .islands {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 0 -10px;
            padding-top: 8px;
        }
        .islands-head {
            display: none;
        }
        .island {
            width: calc(20% - 5px);
            margin: 10px;
            background: #202225;
            font: 16px fn,sans-serif;
            text-align: center;
            text-transform: uppercase;
            border-radius: 8px;
            box-shadow: 0 0 10px 0 rgba(0,0,0,.18);
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .island-link {
            display: flex;
            flex-direction: column;
            height: 100%;
            color: white;
            text-decoration: none;
        }
        .island-link:visited {
            color: white;
        }
        .island-link:hover {
            text-decoration: none;
            color: white;
        }
        @media(max-width: 850px) {
            .island {
                width:calc(33.33% - 16px);
                margin: 8px
            }
        }
        
        @media(max-width: 650px) {
            .island {
                width:calc(50% - 16px);
                margin: 8px
            }
        }
        .islands {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 0 -10px;
            padding-top: 8px;
        }
    </style>
</head>
<body>
    <header>
        <a href="/" class="back-button">‚Üê Back to Home</a>
    </header>
    <img src="{{ creatorbanner }}" loading="lazy" alt="" style="display:block;position:absolute;top:0;left:0;width:100%;height:336px;object-fit:cover;object-position:center top;-webkit-mask-image:linear-gradient(to top,transparent 2%,black 95%);mask-image:linear-gradient(to top,transparent 2%,black 95%);z-index:-1">
    <div class="wrap" style="background:transparent">
        <div>
            <div class="creator-profile">
                <img src="{{ creatorlogo }}" style="width:100px;height:100px;border-radius:50%">
                <div>
                    <h1 class="creator-title">{{ name_creator | upper }}</h1>
                    <div class="favorite-counter">
                        <div class="favorite-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
                                <path fill-rule="evenodd" d="M4.404 7.404a6.5 6.5 0 0 1 9.192 0L16 9.808l2.404-2.404a6.5 6.5 0 0 1 9.192 9.192L16 28.192 4.404 16.596a6.5 6.5 0 0 1 0-9.192" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <div class="favorite-text">
                            <span class="favorite-count"><span>{{ creatorfollow }}</span></span>
                            <span class="favorite-label"><span>Follow</span></span>
                        </div>
                    </div>

                    <div class="creator-socials">
                        {% if island.get("twitter") != 'None' %}
                            <a href="{{ island.twitter }}" target="_blank" rel="noopener noreferrer" class="button-grey">
                                <!-- Twitter SVG -->
                                <svg viewBox="0 0 32 32" style="width:24px;height:24px">
                                    <path d="m18.537 13.958 9.928-11.291h-2.353l-8.62 9.804-6.884-9.805H2.667l10.41 14.826-10.41 11.841H5.02l9.102-10.353 7.271 10.353h7.94L18.538 13.958Zm-3.222 3.665-1.055-1.476L5.867 4.399h3.614l6.773 9.48 1.055 1.477 8.804 12.323H22.5l-7.185-10.055z">
                                    </path>
                                </svg>
                            </a>
                        {% endif %}
                        {% if island.get("youtube") != 'None' %}
                            <a href="{{ island.youtube }}" target="_blank" rel="noopener noreferrer" class="button-grey">
                                <!-- YouTube SVG -->
                                <svg viewBox="0 0 24 24" style="width:24px;height:24px">
                                    <path d="M11.993 3.5s-7.501 0-9.384.495C1.6 4.28.77 5.12.489 6.155 0 8.062 0 12.009 0 12.009s0 3.96.49 5.836a3.07 3.07 0 0 0 2.119 2.146c1.897.51 9.383.51 9.383.51s7.516 0 9.399-.495a3 3 0 0 0 2.105-2.146C24 15.97 24 12.022 24 12.022s.015-3.96-.504-5.866a2.98 2.98 0 0 0-2.105-2.13C19.508 3.5 11.993 3.5 11.993 3.5M9.606 8.361l6.24 3.646-6.24 3.632z">
                                    </path>
                                </svg>
                            </a>
                        {% endif %}
                        {% if island.get("discord") != 'None' %}
                            <a href="{{ island.discord }}" target="_blank" rel="noopener noreferrer" class="button-grey">
                                <!-- Discord SVG -->
                                <svg viewBox="0 0 24 24" style="width:24px;height:24px">
                                    <path d="M20.317 4.656a19.8 19.8 0 0 0-4.885-1.516.074.074 0 0 0-.079.038c-.21.375-.444.864-.608 1.249a18.3 18.3 0 0 0-5.487 0 13 13 0 0 0-.617-1.25.08.08 0 0 0-.079-.037 19.7 19.7 0 0 0-4.885 1.516.1.1 0 0 0-.032.027C.533 9.332-.32 13.866.099 18.343a.08.08 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.08.08 0 0 0 .084-.029c.462-.63.874-1.295 1.226-1.994.021-.04.001-.09-.041-.105a13 13 0 0 1-1.872-.893.077.077 0 0 1-.008-.127q.19-.143.372-.292a.07.07 0 0 1 .078-.01c3.927 1.793 8.18 1.793 12.061 0a.07.07 0 0 1 .079.01q.18.148.372.292c.044.032.04.1-.006.127q-.895.523-1.873.892a.077.077 0 0 0-.041.106c.36.698.772 1.363 1.225 1.994a.08.08 0 0 0 .084.028 19.8 19.8 0 0 0 6.002-3.03.08.08 0 0 0 .032-.055c.5-5.176-.838-9.673-3.549-13.66a.06.06 0 0 0-.031-.028M8.02 15.617c-1.182 0-2.157-1.086-2.157-2.419S6.82 10.78 8.02 10.78c1.21 0 2.176 1.095 2.157 2.42 0 1.332-.956 2.418-2.157 2.418m7.975 0c-1.183 0-2.157-1.086-2.157-2.419s.955-2.419 2.157-2.419c1.21 0 2.176 1.095 2.157 2.42 0 1.332-.946 2.418-2.157 2.418">
                                    </path>
                                </svg>
                            </a>
                        {% endif %}
                        {% if island.get("instagram") != 'None' %}
                            <a href="{{ island.instagram }}" target="_blank" rel="noopener noreferrer" class="button-grey">
                                <!-- Instagram SVG -->
                                <svg viewBox="0 0 24 24" style="width:24px;height:24px">
                                    <path d="M16.48 2H7.52A5.526 5.526 0 0 0 2 7.52v8.96A5.525 5.525 0 0 0 7.52 22h8.96A5.526 5.526 0 0 0 22 16.48V7.52A5.526 5.526 0 0 0 16.48 2m3.746 14.48a3.75 3.75 0 0 1-3.745 3.746H7.519a3.75 3.75 0 0 1-3.744-3.745V7.519a3.75 3.75 0 0 1 3.744-3.744h8.962a3.75 3.75 0 0 1 3.744 3.744z"></path><path d="M12 6.847A5.16 5.16 0 0 0 6.846 12 5.16 5.16 0 0 0 12 17.154A5.16 5.16 0 0 0 17.154 12 5.16 5.16 0 0 0 12 6.847m0 8.532A3.383 3.383 0 0 1 8.621 12 3.383 3.383 0 0 1 12 8.621a3.383 3.383 0 0 1 3.379 3.38A3.383 3.383 0 0 1 12 15.378M17.37 5.342a1.306 1.306 0 0 0-1.302 1.301c0 .342.14.678.383.92.24.242.577.382.919.382s.678-.14.92-.381c.243-.243.381-.579.381-.92 0-.344-.138-.68-.38-.921a1.3 1.3 0 0 0-.921-.38">
                                    </path>
                                </svg>
                            </a>
                        {% endif %}
                        {% if island.get("tiktok") != 'None' %}
                            <a href="{{ island.tiktok }}" target="_blank" rel="noopener noreferrer" class="button-grey">
                                <!-- TikTok SVG -->
                                <svg viewBox="0 0 24 24" style="width:24px;height:24px">
                                    <path d="M12.5 0C13.8 0 15.1 0 16.4 0 16.5 1.5 17.1 3.1 18.2 4.2 19.3 5.3 20.9 5.9 22.4 6V10C20.9 10 19.4 9.6 18.1 9 17.5 8.7 17 8.4 16.4 8 16.4 10.9 16.4 13.8 16.4 16.7 16.3 18.1 15.8 19.5 15 20.6 13.7 22.5 11.4 23.7 9.1 23.8 7.6 23.9 6.2 23.5 5 22.7 3 21.5 1.6 19.3 1.4 17 1.3 16.5 1.3 16 1.4 15.5 1.5 13.6 2.5 11.8 3.9 10.5 5.6 9.1 7.9 8.4 10.1 8.8 10.1 10.3 10.1 11.8 10.1 13.3 9.1 13 7.9 13.1 7.1 13.7 6.4 14.1 6 14.7 5.7 15.4 5.5 15.9 5.6 16.5 5.7 17 5.9 18.7 7.5 20 9.2 19.9 10.6 19.9 11.7 19.2 12.8 18.5 13 18.3 13.2 18 13.2 17.3 13.3 15.5 13.3 13.7 13.3 12 13.3 8 13.3 4 13.3 0 12.5 0z">
                                    </path>
                                </svg>
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <main>
        <div class="island-grid" id="islandGrid">
            <!-- Islands will be populated dynamically -->
        </div>
    </main>
    <div id="imageModal" class="modal" onclick="closeModal()">
        <img id="modalImage" class="modal-content" src=""/>
    </div>
    <script>
        // Function to fetch CCU data
        function fetchCCUData() {
            if (window.location.pathname.startsWith('/creator/')) {
                const creator_id = "{{ creator_id }}"
                /*const creatorId = window.location.pathname.split('/')[2];  // Extract creator ID from URL*/
                fetch(`/api/live-ccu/${creator_id}`)
                    .then(response => response.json())
                    .then(islands => {
                        const islandGrid = document.getElementById('islandGrid');
                        islandGrid.innerHTML = '';  // Clear existing content
                        
                        // Add the SVG definition for the player icon
                        const svgDefs = document.createElement('div');
                        svgDefs.style.display = 'none';
                        svgDefs.innerHTML = `
                            <svg viewBox='0 0 24 24'>
                                <path id='ccu-icon' d='M10.1 16c2.3-.5 4.4-1 3.4-2.9-3.1-6-.8-9.1 2.5-9.1 3.4 0 5.6 3.3 2.5 9.1-1 2 1.1 2.4 3.4 3 2 .4 2.1 1.4 2.1 3v.9H8c0-2.2-.2-3.4 2.1-4zM0 20h6c0-6.5 3-3.7 3-8.9C9 9.1 7.7 8 6 8c-2.5 0-4.2 2.4-1.9 6.8.8 1.5-.8 1.9-2.5 2.2C0 17.4 0 18.1 0 19.4v.6z'></path>
                            </svg>
                        `;
                        islandGrid.appendChild(svgDefs);
                        
                        islands.forEach(island => {
                            // Create new HTML elements dynamically for each island
                            const islandCard = document.createElement('div');
                            islandCard.className = 'island';
                            islandCard.innerHTML = `
                                <a href="/island/${island.code}" class="island-link">
                                    <div class="island-img">
                                        <img src="${island.image}" alt="${island.name}" loading="lazy" class="island-image">
                                        <div class="players">
                                            <svg viewBox="0 0 24 24">
                                                <use href="#ccu-icon"></use>
                                            </svg>
                                            ${island.ccu}
                                        </div>
                                    </div>
                                    <h2 class="island-title">${island.name}</h2>
                                </a>
                            `;
                            islandGrid.appendChild(islandCard);
                        });
                    })
                    .catch(error => {
                        console.error('Error fetching CCU data:', error);
                    });
            }
        }

        fetchCCUData();
        setInterval(fetchCCUData, 15000);  // 15000 ms = 15 seconds

        // Copy to clipboard function
        function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    console.log('Copied: ' + text);
                }).catch(err => {
                    console.error('Could not copy text: ', err);
                });
            } else {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand("copy");
                    console.log('Copied (fallback method): ' + text);
                } catch (err) {
                    console.error('Fallback copy failed: ', err);
                }
                document.body.removeChild(textArea);
            }
        }
    </script>
</body>
</html>